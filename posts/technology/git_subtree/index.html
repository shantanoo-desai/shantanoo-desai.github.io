<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><meta http-equiv=x-ua-compatible content="IE=edge, chrome=1"><title>subtrees in Git: How to split Directories into individual standalone repositories - Shan's Corner</title><meta name=Description content="How to avoid a mess when a large Repository needs to split into smaller, standalone repositories"><meta property="og:title" content="subtrees in Git: How to split Directories into individual standalone repositories"><meta property="og:description" content="How to avoid a mess when a large Repository needs to split into smaller, standalone repositories"><meta property="og:type" content="article"><meta property="og:url" content="https://shantanoo-desai.github.io/posts/technology/git_subtree/"><meta property="article:published_time" content="2021-04-02T17:31:05+02:00"><meta property="article:modified_time" content="2021-04-02T17:31:05+02:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="subtrees in Git: How to split Directories into individual standalone repositories"><meta name=twitter:description content="How to avoid a mess when a large Repository needs to split into smaller, standalone repositories"><meta name=application-name content="Shan's World"><meta name=apple-mobile-web-app-title content="Shan's World"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://shantanoo-desai.github.io/posts/technology/git_subtree/><link rel=prev href=https://shantanoo-desai.github.io/posts/books/cancer_ward_solzhenitsyn_aleksandr/><link rel=stylesheet href=/lib/normalize/normalize.min.css><link rel=stylesheet href=/css/style.min.css><link rel=stylesheet href=/lib/fontawesome-free/all.min.css><link rel=stylesheet href=/lib/animate/animate.min.css><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"subtrees in Git: How to split Directories into individual standalone repositories","inLanguage":"en","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/shantanoo-desai.github.io\/posts\/technology\/git_subtree\/"},"genre":"posts","keywords":"git, software-project-management","wordcount":382,"url":"https:\/\/shantanoo-desai.github.io\/posts\/technology\/git_subtree\/","datePublished":"2021-04-02T17:31:05+02:00","dateModified":"2021-04-02T17:31:05+02:00","publisher":{"@type":"Organization","name":"Shan"},"author":{"@type":"Person","name":"Shan"},"description":"How to avoid a mess when a large Repository needs to split into smaller, standalone repositories"}</script></head><body header-desktop header-mobile><script type=text/javascript>(window.localStorage&&localStorage.getItem('theme')?localStorage.getItem('theme')==='dark':('auto'==='auto'?window.matchMedia('(prefers-color-scheme: dark)').matches:'auto'==='dark'))&&document.body.setAttribute('theme','dark');</script><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><div class=header-title><a href=/ title="Shan's Corner">Shan's Corner</a></div><div class=menu><div class=menu-inner><a class=menu-item href=/posts/ title="My thoughts and works digitally transcribed">Posts </a><a class=menu-item href=/tags/>Tags </a><a class=menu-item href=/about/ title="Everything You wish to know about me">About </a><a class=menu-item href=/categories/>Categories </a><span class="menu-item delimiter"></span><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme"><i class="fas fa-adjust fa-fw"></i></a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title="Shan's Corner">Shan's Corner</a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><a class=menu-item href=/posts/ title="My thoughts and works digitally transcribed">Posts</a><a class=menu-item href=/tags/>Tags</a><a class=menu-item href=/about/ title="Everything You wish to know about me">About</a><a class=menu-item href=/categories/>Categories</a><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme">
<i class="fas fa-adjust fa-fw"></i></a></div></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=main><div class=container><div class=toc id=toc-auto><h2 class=toc-title>Contents</h2><div class=toc-content id=toc-content-auto></div></div><article class="page single"><h1 class="single-title animated flipInX">subtrees in Git: How to split Directories into individual standalone repositories</h1><div class=post-meta><div class=post-meta-line><span class=post-author><a href=/ title=Author rel=author class=author><i class="fas fa-user-circle fa-fw"></i>Shan</a></span>&nbsp;<span class=post-category>included in <a href=/categories/technology/><i class="far fa-folder fa-fw"></i>Technology</a></span></div><div class=post-meta-line><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime=02-04-2021>02-04-2021</time>&nbsp;<i class="fas fa-pencil-alt fa-fw"></i>&nbsp;382 words&nbsp;
<i class="far fa-clock fa-fw"></i>&nbsp;2 minutes&nbsp;</div></div><div class="details toc" id=toc-static kept><div class="details-summary toc-title"><span>Contents</span>
<span><i class="details-icon fas fa-angle-right"></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#problem>Problem</a><ul><li><a href=#current-structure>Current Structure</a></li></ul></li><li><a href=#solution>Solution</a><ul><li><a href=#usage>Usage</a></li></ul></li><li><a href=#setting-up-repositories>Setting Up Repositories</a></li><li><a href=#sources>Sources</a></li></ul></nav></div></div><div class=content id=content><h2 id=problem>Problem</h2><p>You start working on an idea without having to bother if the project needs to split into smaller components, projects.
Once the vision starts becomes clear and the horizon becomes clear, it makes sense to start thinking into managing components as their
own standalone software repositories.</p><p>One does not want to put a lot of effort towards this <em>migration</em>, and not mess the History your <code>git</code> repository has. Credit from your
colleagues should be manifested fairly in the new repositories.</p><p>How does one achieve this?</p><h3 id=current-structure>Current Structure</h3><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>$ <span class=nb>cd</span> big-repository
<span class=c1># MEGA-REPOSITORY</span>
.
├── SubProject1 <span class=c1># this should be a standalone repository</span>
│   └── SubModule1
└── SubProject2 <span class=c1># this should be a standalone repository</span>
    ├── SubModule1
    ├── SubModule2
    └── tests
</code></pre></div><h2 id=solution>Solution</h2><p>The great thing about <code>git</code> is it diversified eco-system. The problem of making directories their own git repositories is something a large
pool of IT Developers face. The solution is to make the subprojects into a <code>subtree</code>.</p><h3 id=usage>Usage</h3><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>$ git subtree split --prefix &lt;your_directory_name&gt; --branch &lt;branch_name&gt;
</code></pre></div><p>here <code>branch_name</code> can be whatever you wish it to be, <code>your_directory_name</code> here in my case is <code>SubProject1</code> and <code>SubProject2</code>.</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>$ git subtree split --prefix SubProject1 --branch micro-project
</code></pre></div><p>git will make a branch called <code>micro-project</code> and check it out for you. Upon listing the files and directories it will only show the content of
the directory mentioned (here, contents of <code>SubProject1</code>)</p><p>Similarly for <code>SubProject2</code></p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>$ git subtree split --prefix SubProject2 --branch nano-project
</code></pre></div><h2 id=setting-up-repositories>Setting Up Repositories</h2><ol><li><p>Initialize your Repositories on your Git Server / Platform (GitHub, GitLab etc.)</p></li><li><p>Create a new directory</p><pre><code> $ mkdir micro-project/ &amp;&amp; cd micro-project/
</code></pre></li><li><p>Initialize the directory as a git repository</p><pre><code> $ git init
</code></pre></li><li><p>Pull the subtree branch in the <code>big-repository</code> to the current directory</p><pre><code> $ git pull ../path/to/big-repository &lt;branch-name&gt;
</code></pre><p>In our case for <code>micro-project</code> the branch name is <code>micro-project</code></p><pre><code> $ git pull ../path/to/big-repository micro-project
</code></pre></li><li><p>You can verify if all the commit logs are still intact in the new repository using:</p><pre><code> $ git log --oneline
</code></pre></li><li><p>Add a <code>remote</code> to your new Repository using:</p><pre><code> $ git remote add origin &lt;YOUR_GIT_SERVER_URL/micro-project.git&gt;
</code></pre></li><li><p>Push to code to the Server:</p><pre><code> $ git push -u origin master
</code></pre></li></ol><p>Continue the steps for <code>nano-project</code> too.</p><h2 id=sources>Sources</h2><ul><li><a href=https://ptc-it.de/move-files-to-new-repo-in-git/#moving-just-a-directory target=_blank rel="noopener noreffer">Paul Cochrane&rsquo;s Blog Post on Moving Files and Directories to a New Repository in Git</a></li><li><a href=https://stackoverflow.com/a/17864475/4851126 target=_blank rel="noopener noreffer">Fantastic StackOverflow Answer from coolaj86 titles The Easy Way</a></li></ul></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span>Updated on 02-04-2021</span></div><div class=post-info-license></div></div><div class=post-info-line><div class=post-info-md></div><div class=post-info-share><span><a href=javascript:void(0); title="Share on Twitter" data-sharer=twitter data-url=https://shantanoo-desai.github.io/posts/technology/git_subtree/ data-title="subtrees in Git: How to split Directories into individual standalone repositories" data-hashtags=git,software-project-management><i class="fab fa-twitter fa-fw"></i></a><a href=javascript:void(0); title="Share on Facebook" data-sharer=facebook data-url=https://shantanoo-desai.github.io/posts/technology/git_subtree/ data-hashtag=git><i class="fab fa-facebook-square fa-fw"></i></a><a href=javascript:void(0); title="Share on Linkedin" data-sharer=linkedin data-url=https://shantanoo-desai.github.io/posts/technology/git_subtree/><i class="fab fa-linkedin fa-fw"></i></a><a href=javascript:void(0); title="Share on WhatsApp" data-sharer=whatsapp data-url=https://shantanoo-desai.github.io/posts/technology/git_subtree/ data-title="subtrees in Git: How to split Directories into individual standalone repositories" data-web><i class="fab fa-whatsapp fa-fw"></i></a><a href=javascript:void(0); title="Share on Hacker News" data-sharer=hackernews data-url=https://shantanoo-desai.github.io/posts/technology/git_subtree/ data-title="subtrees in Git: How to split Directories into individual standalone repositories"><i class="fab fa-hacker-news fa-fw"></i></a><a href=javascript:void(0); title="Share on Reddit" data-sharer=reddit data-url=https://shantanoo-desai.github.io/posts/technology/git_subtree/><i class="fab fa-reddit fa-fw"></i></a></span></div></div></div><div class=post-info-more><section class=post-tags><i class="fas fa-tags fa-fw"></i>&nbsp;<a href=/tags/git/>git</a>,&nbsp;<a href=/tags/software-project-management/>software-project-management</a></section><section><span><a href=javascript:void(0); onclick=window.history.back();>Back</a></span>&nbsp;|&nbsp;<span><a href=/>Home</a></span></section></div><div class=post-nav><a href=/posts/books/cancer_ward_solzhenitsyn_aleksandr/ class=prev rel=prev title="Cancer Ward by Aleksandr Solzhenitsyn"><i class="fas fa-angle-left fa-fw"></i>Cancer Ward by Aleksandr Solzhenitsyn</a></div></div></article></div></main><footer class=footer><div class=footer-container><div class=footer-line>Powered by <a href=https://gohugo.io/ target=_blank rel="noopener noreffer" title="Hugo 0.70.0">Hugo</a> | Theme - <a href=https://github.com/dillonzq/LoveIt target=_blank rel="noopener noreffer" title="LoveIt 0.2.10"><i class="far fa-kiss-wink-heart fa-fw"></i>LoveIt</a></div><div class=footer-line><i class="far fa-copyright fa-fw"></i><span itemprop=copyrightYear>2021</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=/ target=_blank></a></span></div></div></footer></div><div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title="Back to Top"><i class="fas fa-arrow-up fa-fw"></i></a><a href=# id=view-comments class=fixed-button title="View Comments"><i class="fas fa-comment fa-fw"></i></a></div><script type=text/javascript src=/lib/smooth-scroll/smooth-scroll.min.js></script><script type=text/javascript src=/lib/lazysizes/lazysizes.min.js></script><script type=text/javascript src=/lib/clipboard/clipboard.min.js></script><script type=text/javascript src=/lib/sharer/sharer.min.js></script><script type=text/javascript>window.config={"code":{"copyTitle":"Copy to clipboard","maxShownLines":20},"comment":{}};</script><script type=text/javascript src=/js/theme.min.js></script></body></html>